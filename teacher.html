<!DOCTYPE html>
<html>
  <head>
	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="css/flatly.css">
  <link rel="stylesheet" type="text/css" href="css/fonts/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <script type="text/javascript" src="js/jquery.min.js">
  </script>
  <script type="text/javascript" src="js/bootstrap.min.js">
  </script>
  <script type="text/javascript" src="js/script.js">
  </script>
  <script type="text/javascript" src="https://cdn.firebase.com/js/client/2.4.0/firebase.js">
  </script>
      <style>
          .className1{
              
              
              border: 1px solid;
              padding: 20px;
              width: 200px;
              text-align: center;
              background-color: #07a2e4;
              color:#fff;
          }
      
      </style>
  <title>
    Template
  </title>
  
  
  <script>
    
    var fb = new Firebase("https://librabooks.firebaseio.com");
    var uid;
    fb.onAuth(function(authData) {
      if(authData) {
        uid = authData.uid;
      }
      else {
        window.location = "login.html";
      }
    }
             );
    
    // ADD CODE SO THIS STARTS ON STARTUP
    
    function onInit(){
      
      $.ajax({
        type: "GET",
        url: "http://libra-vmcool09.c9users.io/users/info?userID=" + uid,
        success: function(json1)
        {
          for(object in json1){
            $.ajax({
              type: "GET",
              url: "http://libra-vmcool09.c9users.io/classroom/info?=" + object,
              success: function(res, status)
              {
                
                $(".deck2").html("")
                console.log(res)
                console.log(status)
                  var data = JSON.parse(res);
                      var data2 = JSON.parse(json);
                          
                          for(i=0; i<data.length; i++) {
                            $(".deck").append('<a href="class.html?id='+data[i].classID+'"><div class="className1" style="margin-top:5px">'+data2[i].className+'</div></a>');
                          }
              }
              ,
              error: function(data){
                alert("Not valid info!22");
              }
            }
                  );
          }
        },
        
        error: function(data){
        alert("Not valid info!");
      }
             }
            );
      
      
    }
    
    
    var nme;
    
    function info()
    {
      nme = document.getElementById('className').value;
      search(nme);
      
    }
    
    function search(name)
    {
      $.ajax({
        type: "GET",
        url: "http://libra-vmcool09.c9users.io/classroom/add?teacherID="+ uid + "&className=" + name,
        success: function(json)
        {
          location.reload();
                  
                }
                  ,
                  error: function(data)
                  {
                    alert("Not valid info!");
                }
                  ,
                }
                      );
            }
       
       
  </script>
  
  
  </head>
  <body onload="onInit()">
    
  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">
            Toggle navigation
          </span>
          <span class="icon-bar">
          </span>
          <span class="icon-bar">
          </span>
          <span class="icon-bar">
          </span>
        </button>
        <a class="navbar-brand" href="#">
          Libra
        </a>
      </div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="#">
              My Library
            </a>
          </li>
          <li>
            <a href="#">
              Find Books
            </a>
          </li>
          <li>
            <a href="#">
              My Account
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  
  
  
  
  <div class="container-fluid">

    <div class="row">
      <div class="col-sm-15 col-sm-offset-3 col-md-1 col-md-offset-0 main">

        
        <button type="button" class="btn btn-success " data-toggle="modal" data-target="#myModal">
          Create a Classroom
        </button>
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">
                    &times;
                  </span>
                </button>
                <h4 class="modal-title" id="myModalLabel">
                  Crete a Classroom
                </h4>
              </div>
              <div class="modal-body">
                <div class="form-group">
                  <label class="control-label" for="focusedInput">
                    Name your classroom
                  </label>
                  <input class="form-control" id="className" value="Class name" type="text">
                </div>
                
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">
                  Cancel
                </button>
                <button type="button" onclick="info()" class="btn btn-success">
                  Create Classroom
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="deck" id="deck">
            <a href="class.html?id='+data[i].classID+'"><div class="className1" style="margin-top:5px">Name</div></a>
                        <a href="class.html?id='+data[i].classID+'"><div class="className1" style="margin-top:5px">Name</div></a>

                        <a href="class.html?id='+data[i].classID+'"><div class="className1" style="margin-top:5px">Name</div></a>

                        <a href="class.html?id='+data[i].classID+'"><div class="className1" style="margin-top:5px">Name</div></a>

                        <a href="class.html?id='+data[i].classID+'"><div class="className1" style="margin-top:5px">Name</div></a>

        </div>

      </div>
    </div>

  </div>
  
  <!-- Bootstrap core JavaScript
================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js">
  </script>
  <script>
    window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')
  </script>
  <script src="../../dist/js/bootstrap.min.js">
  </script>
  <!-- Just to make our placeholder images work. Don't actually copy the next line! -->
  <script src="../../assets/js/vendor/holder.min.js">
  </script>
  <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
  <script src="../../assets/js/ie10-viewport-bug-workaround.js">
  </script>
  
  
  </body>
</html>